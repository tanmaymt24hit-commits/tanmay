<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Entry System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        medical: {
                            primary: '#3b82f6',
                            secondary: '#60a5fa',
                            accent: '#93c5fd',
                            light: '#dbeafe',
                            dark: '#1e40af'
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-medical-light min-h-screen flex items-center justify-center p-4">
    <div class="bg-white rounded-xl shadow-lg overflow-hidden w-full max-w-4xl my-8">
        <!-- Header -->
        <div class="bg-medical-primary text-white p-6">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-2xl font-bold"><i class="fas fa-pills mr-3"></i>MediTrack</h1>
                    <p class="text-medical-light">Medical Inventory & Billing System</p>
                </div>
                <div class="text-right">
                    <p class="text-sm">Today: <span id="current-date">Loading...</span></p>
                </div>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="p-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Input Form -->
                <div class="bg-medical-light rounded-lg p-5">
                    <h2 class="text-xl font-semibold text-medical-dark mb-4"><i class="fas fa-plus-circle mr-2"></i>Add Medicine</h2>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Medicine Name</label>
                            <input type="text" id="medicine-name" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-medical-primary focus:border-transparent" placeholder="Enter medicine name">
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Quantity</label>
                                <input type="number" id="medicine-quantity" min="1" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-medical-primary focus:border-transparent" placeholder="Qty" value="1">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Price per Unit ($)</label>
                                <input type="number" id="medicine-price" min="0" step="0.01" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-medical-primary focus:border-transparent" placeholder="0.00">
                            </div>
                        </div>
                        
                        <button id="add-medicine" class="w-full bg-medical-primary text-white py-2 rounded-lg font-medium hover:bg-medical-dark transition duration-200">
                            <i class="fas fa-cart-plus mr-2"></i>Add to Bill
                        </button>
                    </div>
                </div>
                
                <!-- Bill Summary -->
                <div class="bg-white border border-gray-200 rounded-lg p-5">
                    <h2 class="text-xl font-semibold text-medical-dark mb-4"><i class="fas fa-receipt mr-2"></i>Bill Summary</h2>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="bg-gray-100">
                                    <th class="text-left py-2 px-3">Medicine</th>
                                    <th class="text-right py-2 px-3">Qty</th>
                                    <th class="text-right py-2 px-3">Price</th>
                                    <th class="text-right py-2 px-3">Total</th>
                                    <th class="text-center py-2 px-3">Action</th>
                                </tr>
                            </thead>
                            <tbody id="bill-items">
                                <!-- Bill items will be added here dynamically -->
                                <tr>
                                    <td colspan="5" class="text-center py-6 text-gray-500" id="empty-message">
                                        <i class="fas fa-shopping-cart text-3xl mb-2 block"></i>
                                        No medicines added yet
                                    </td>
                                </tr>
                            </tbody>
                            <tfoot class="border-t-2 border-gray-200">
                                <tr>
                                    <td colspan="3" class="text-right py-2 px-3 font-medium">Subtotal:</td>
                                    <td class="text-right py-2 px-3 font-medium" id="subtotal">$0.00</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td colspan="3" class="text-right py-2 px-3">Tax (5%):</td>
                                    <td class="text-right py-2 px-3" id="tax">$0.00</td>
                                    <td></td>
                                </tr>
                                <tr class="bg-medical-light">
                                    <td colspan="3" class="text-right py-3 px-3 font-bold">Total Bill:</td>
                                    <td class="text-right py-3 px-3 font-bold text-medical-dark text-lg" id="total-bill">$0.00</td>
                                    <td></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    
                    <div class="mt-6 flex space-x-3">
                        <button id="reset-btn" class="flex-1 bg-gray-200 text-gray-800 py-2 rounded-lg font-medium hover:bg-gray-300 transition duration-200">
                            <i class="fas fa-redo mr-2"></i>Reset
                        </button>
                        <button id="print-btn" class="flex-1 bg-medical-secondary text-white py-2 rounded-lg font-medium hover:bg-medical-primary transition duration-200">
                            <i class="fas fa-print mr-2"></i>Print Bill
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Recent Entries -->
            <div class="mt-8 bg-white border border-gray-200 rounded-lg p-5">
                <h2 class="text-xl font-semibold text-medical-dark mb-4"><i class="fas fa-history mr-2"></i>Recent Medicine Entries</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="recent-entries">
                    <!-- Recent entries will be added here -->
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-pills text-3xl mb-2 block"></i>
                        No recent entries
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="bg-gray-100 p-4 text-center text-sm text-gray-600">
            <p>Â© 2023 MediTrack - Medical Inventory Management System</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Set current date
            const now = new Date();
            document.getElementById('current-date').textContent = now.toLocaleDateString('en-US', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            // Initialize variables
            let medicines = [];
            let billItems = [];
            let recentEntries = [];
            
            // DOM Elements
            const medicineNameInput = document.getElementById('medicine-name');
            const medicineQuantityInput = document.getElementById('medicine-quantity');
            const medicinePriceInput = document.getElementById('medicine-price');
            const addMedicineBtn = document.getElementById('add-medicine');
            const billItemsContainer = document.getElementById('bill-items');
            const emptyMessage = document.getElementById('empty-message');
            const subtotalElement = document.getElementById('subtotal');
            const taxElement = document.getElementById('tax');
            const totalBillElement = document.getElementById('total-bill');
            const resetBtn = document.getElementById('reset-btn');
            const printBtn = document.getElementById('print-btn');
            const recentEntriesContainer = document.getElementById('recent-entries');
            
            // Add medicine to bill
            addMedicineBtn.addEventListener('click', function() {
                const name = medicineNameInput.value.trim();
                const quantity = parseInt(medicineQuantityInput.value);
                const price = parseFloat(medicinePriceInput.value);
                
                if (!name || isNaN(quantity) || quantity < 1 || isNaN(price) || price < 0) {
                    alert('Please enter valid medicine details');
                    return;
                }
                
                // Add to bill items
                const total = quantity * price;
                const medicine = {
                    name,
                    quantity,
                    price,
                    total
                };
                
                billItems.push(medicine);
                updateBill();
                
                // Add to recent entries if not already there
                const existingIndex = recentEntries.findIndex(entry => entry.name === name);
                if (existingIndex === -1) {
                    recentEntries.push({...medicine});
                    if (recentEntries.length > 6) {
                        recentEntries.shift(); // Remove oldest if more than 6
                    }
                    updateRecentEntries();
                }
                
                // Clear input fields
                medicineNameInput.value = '';
                medicineQuantityInput.value = '1';
                medicinePriceInput.value = '';
                medicineNameInput.focus();
            });
            
            // Update bill display
            function updateBill() {
                if (billItems.length === 0) {
                    emptyMessage.style.display = 'table-cell';
                    return;
                }
                
                emptyMessage.style.display = 'none';
                
                // Clear current items
                while (billItemsContainer.firstChild) {
                    billItemsContainer.removeChild(billItemsContainer.firstChild);
                }
                
                // Add items to bill
                let subtotal = 0;
                
                billItems.forEach((item, index) => {
                    subtotal += item.total;
                    
                    const row = document.createElement('tr');
                    row.className = 'border-b border-gray-100';
                    row.innerHTML = `
                        <td class="py-2 px-3">${item.name}</td>
                        <td class="text-right py-2 px-3">${item.quantity}</td>
                        <td class="text-right py-2 px-3">$${item.price.toFixed(2)}</td>
                        <td class="text-right py-2 px-3">$${item.total.toFixed(2)}</td>
                        <td class="text-center py-2 px-3">
                            <button class="text-red-500 hover:text-red-700 remove-item" data-index="${index}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    `;
                    
                    billItemsContainer.appendChild(row);
                });
                
                // Add event listeners to remove buttons
                document.querySelectorAll('.remove-item').forEach(button => {
                    button.addEventListener('click', function() {
                        const index = parseInt(this.getAttribute('data-index'));
                        billItems.splice(index, 1);
                        updateBill();
                    });
                });
                
                // Calculate totals
                const tax = subtotal * 0.05;
                const total = subtotal + tax;
                
                subtotalElement.textContent = `$${subtotal.toFixed(2)}`;
                taxElement.textContent = `$${tax.toFixed(2)}`;
                totalBillElement.textContent = `$${total.toFixed(2)}`;
            }
            
            // Update recent entries display
            function updateRecentEntries() {
                if (recentEntries.length === 0) {
                    recentEntriesContainer.innerHTML = `
                        <div class="text-center py-8 text-gray-500 col-span-3">
                            <i class="fas fa-pills text-3xl mb-2 block"></i>
                            No recent entries
                        </div>
                    `;
                    return;
                }
                
                recentEntriesContainer.innerHTML = '';
                
                recentEntries.forEach(entry => {
                    const entryElement = document.createElement('div');
                    entryElement.className = 'bg-medical-light p-4 rounded-lg';
                    entryElement.innerHTML = `
                        <h3 class="font-medium text-medical-dark">${entry.name}</h3>
                        <div class="flex justify-between mt-2">
                            <span>Qty: ${entry.quantity}</span>
                            <span>$${entry.price.toFixed(2)}/unit</span>
                        </div>
                        <div class="mt-2 text-medical-primary font-medium">
                            Total: $${entry.total.toFixed(2)}
                        </div>
                    `;
                    
                    recentEntriesContainer.appendChild(entryElement);
                });
            }
            
            // Reset bill
            resetBtn.addEventListener('click', function() {
                billItems = [];
                updateBill();
            });
            
            // Print bill
            printBtn.addEventListener('click', function() {
                if (billItems.length === 0) {
                    alert('No items in the bill to print');
                    return;
                }
                
                alert('Bill printing functionality would be implemented here. In a real application, this would generate a printable bill or PDF.');
            });
            
            // Initialize
            updateBill();
            updateRecentEntries();
        });
    </script>
</body>
</html>